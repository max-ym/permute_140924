# This file defines the schema for an employment record source.
# Permute framework will use this schema to validate the data source, which should be
# registered from the implementation code. If this schema is not compatible with the registered
# data source, the framework will raise an error.
# So this file is a contract between the implementation code and the configuration file.
#
# The reason it is done that way is to allow the implementation code to be decoupled from the
# configuration file. Also, any Permute validators would be able to validate YAML configuration
# without knowing the implementation specifics.

permute:
  version: 0.1
  type: source
  use:
    - monetary::Monetary # Example of type `Monetary` import from another in-project file

filters:
  date_from:
    type: Option<Date>
    default: None
  date_to:
    type: Option<Date>
    default: None
  exclude_terminations:
    type: Option<Boolean>
    default: None

columns:
  employee_id:
    type: String
    check:
      - self.is_regex_match("^SID\d{6}$")
  hire_date:
    type: Date
  termination_date:
    type: Option<Date>
  salary:
    type: Monetary
  meta:
    type: Option<Map<String, dyn Any>>
